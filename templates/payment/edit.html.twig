{% extends 'base.html.twig' %}

{% block title %}Edit Payment #{{ payment.id }} - Floryn Garden{% endblock %}
{% block page_title %}Edit Payment{% endblock %}

{% block body %}
<div class="page-wrapper px-4 sm:px-6 lg:px-8">
  <nav class="breadcrumb">
    <a href="{{ path('admin_dashboard') }}"><i class="fas fa-home"></i></a>
    <span class="separator">/</span>
    <a href="{{ path('app_payment_index') }}">Payments</a>
    <span class="separator">/</span>
    <a href="{{ path('app_payment_show', {'id': payment.id}) }}">Payment #{{ payment.id }}</a>
    <span class="separator">/</span>
    <span class="current">Edit</span>
  </nav>

  <div class="page-header">
    <div class="page-header-info">
      <div class="avatar lg" style="background:linear-gradient(135deg,#22c55e,#16a34a);"><i class="fas fa-dollar-sign" style="font-size:20px;"></i></div>
      <div>
        <h1>Edit Payment #{{ payment.id }}</h1>
        <p class="subtitle">Update payment transaction details. Amount: ₱{{ payment.amountPaid|number_format(2) }}</p>
      </div>
    </div>
    <div class="page-header-actions">
      <a href="{{ path('app_payment_show', {'id': payment.id}) }}" class="btn btn-outline"><i class="fas fa-eye"></i> View Details</a>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2">
      {{ include('payment/_form.html.twig', {'button_label': 'Update Payment'}) }}
    </div>

    <div>
      <div class="section-card">
        <div class="section-header">
          <div class="section-icon blue"><i class="fas fa-info-circle"></i></div>
          <h3>Current Details</h3>
        </div>
        <div class="section-body">
          <div class="detail-grid cols-1">
            <div class="detail-item">
              <div class="detail-label">Payment ID</div>
              <div class="detail-value" style="font-weight:600;">#{{ payment.id }}</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Current Amount</div>
              <div class="detail-value large" style="color:#22c55e;">₱{{ payment.amountPaid|number_format(2) }}</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Current Status</div>
              <div class="detail-value">
                <span class="pill {% if payment.status == 'Paid' or payment.status == 'Completed' %}green{% elseif payment.status == 'Pending' %}yellow{% else %}red{% endif %}">{{ payment.status }}</span>
              </div>
            </div>
            {% if payment.reservation %}
            <div class="detail-item">
              <div class="detail-label">Related Reservation</div>
              <div class="detail-value">#{{ payment.reservation.id }} &mdash; {{ payment.reservation.customer.fullName }}</div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="danger-zone" style="margin-top:20px;">
        <div class="danger-zone-header">
          <i class="fas fa-exclamation-triangle"></i>
          <h3>Danger Zone</h3>
        </div>
        <div class="danger-zone-body">
          <p>Permanently delete this payment record. This action cannot be undone.</p>
          {{ include('payment/_delete_form.html.twig') }}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}